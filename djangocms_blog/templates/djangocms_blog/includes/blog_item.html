{% load i18n thumbnail cms_tags %}

<article id="post-{{ post.slug }}" class="post-item">
    {% if image and post.main_image %}
    <div class="blog-visual">
        {% thumbnail post.main_image post.thumbnail_options.size crop=post.thumbnail_options.crop upscale=post.thumbnail_options.upscale subject_location=post.main_image.subject_location as thumb %}
        <img src="{{ thumb.url }}" alt="{{ post.main_image.default_alt_text }}" width="{{ thumb.width }}" height="{{ thumb.height }}" />
    </div>
    {% endif %}
    <header>
        <h1><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h1>
        <h2>{{ post.date_published|date:"DATE_FORMAT" }}</h2>
    </header>
    <div class="blog-lead">
        {% if not TRUNCWORDS_COUNT %}
            {% render_model post "abstract" %}
        {% else %}
            {% render_model post "abstract" "" "" 'truncatewords_html:TRUNCWORDS_COUNT'  %}
        {% endif %}
    </div>
    <footer class="read-more">
        <a href="{{ post.get_absolute_url }}">{% trans "Continue reading" %}.</a>
    </footer>
</article>
